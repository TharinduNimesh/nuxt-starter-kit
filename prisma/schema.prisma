generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "mongodb"
	url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  USER
}

model User {
	id            String         @id @default(auto()) @map("_id") @db.ObjectId
	email         String         @unique
	name          String?
	password      String
	role          Role           @default(USER)
	refreshTokens RefreshToken[]
	createdAt     DateTime       @default(now())
	updatedAt     DateTime       @updatedAt
}

model RefreshToken {
	id        String   @id @default(auto()) @map("_id") @db.ObjectId
	token     String   @unique
	userId    String   @db.ObjectId
	user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
	expiresAt DateTime
	createdAt DateTime @default(now())
	revoked   Boolean  @default(false)
}